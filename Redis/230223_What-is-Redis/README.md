[TOC]

# Redis 00

## Redis

### What is Redis?

> "**Re**mote **DI**ctionary **S**erver"의 약자로, `key-value` 구조의 비정형 데이터를 저장하고 관리하기 위한 오픈 소스 기반의 비관계형 데이터 베이스 관리 시스템(NoSQL DBMS) - 위키백과

- **인 메모리** 키 값 데이터 구조를 갖는 스토어

- **다양한** 인 메모리 **데이터 구조** 집합을 제공하여 다양한 사용자 정의 애플리케이션을 생성 가능하다.
  
  - 캐싱, 세션 관리, pub/sub(발행/구독) 등으로 사용 가능하다.

- `Redis`는 디스크(`DB`)와의 연동으로 **영속성**을 보장할 수 있다.

- `In-Memery` 구조로 속도가 빠르고, 사용이 간편하다.

- `Single threaded`로 작동하여 **한번에 1개의 명령어**만 실행한다.
  
  - 여러 명령어가 순서에 따라 입력될 때, 1개 명령어가 실행되고 완수하지 않는다면 다음 순서의 명령어는 실행되지 않는다.

### 다양한 데이터 구조

- `Redis`에서 지원하는 다양한 데이터 구조는 아래 표와 같다.
  
  모든 정수, 실수.. 등등 프로그래밍언어에서 지원하는 다양하고 세부적인 데이터 타입이 아닌, 문자 또는 숫자 형식으로 데이터가 저장된다.(거의 문자열로 저장됨, 목적에 맞는 "데이터 구조"를 사용해야함)
  
  | 데이터 구조      | 설명                                                                                                    |
  | ----------- | ----------------------------------------------------------------------------------------------------- |
  | String      | 단순한 `key-value` 매핑 구조, 기본형이며 모든 데이터는 문자열로 저장된다.                                                       |
  | Lists       | `value`가 `Array`형식인 데이터 구조. `Queue`나 `Stack`형태로 데이터가 저장된다.                                            |
  | Sets        | 순서가 없는 `Strings` 데이터 "집합". `value`의 중복된 데이터가 하나로 처리된다.                                                |
  | Sorted Sets | Sets와 같은 구조이지만, `Score`라는 숫자 데이터가 할당되어 이를 통해 정렬된 상태를 유지할 수 있다. 모든 `value` 데이터에는 그에 해당되는 `Score`를 갖는다. |
  | Hashes      | `key-value`의 구조를 여러개 가진 `object` 타입을 저장                                                               |

### `Redis`의 영속성

- `In-Memory` 기반의 데이터 베이스인 `Redis`는 데이터를 메모리에 저장하기 때문에, 서버의 전원이 꺼지면 모든 데이터가 삭제된다.
  
  - 이러한 예상치 못한 상황을 대비하기 위해 메모리에 저장된 데이터를 디스크에 백업하는 기능을 제공하며 이를 `AOF`방식과 `RDB` 방식이 있다.

#### Persistence AOF

- `AOF` 방식은 `Redis`에 데이터의 입력, 수정, 삭제의 명령을 실행할 때마다 `Log` 파일에 저장하여 서버가 재시작(머신의 재부팅)될때 `Log` 파일의 기록 데이터를 기반으로 데이터를 복구 할 수 있다.

- 장점
  
  - 데이터의 변화를 **실시간**으로 감지하여 `Log` 파일에 저장하여 변동이 즉시 반영된다.
  
  - 삽입/수정/삭제(Insert, Update, Delete)의 명령을 실행 기록 그대로 `Log`파일에 저장하기 때문에 저장 속도가 빠르며 데이터 손실이 거의 없다.
  
  - `Log` 파일에 접근하여 기록된 명령어를 수정하고 복원할 수 있다.

- 단점
  
  - 변동 사항은 실시간으로 연속되어 축적되기 때문에, `Log`파일의 크기가 매우 커질 수 있다.
  
  - 데이터 자체가 아닌 **명령 기록**을 저장하여 복구에 명령 기록에 따라 재 실행하기 때문에 복구에 소요되는 시간이 길다.

#### Persistence RDB

- `AOF`와 다르게 `Redis`의 데이터를 배치 형식으로 압축하여 저장한다.

- 장점
  
  - 운영 데이터 자체를 압축하여 저장하므로 데이터의 크기가 작다.
  
  - 크기가 작은 압축 데이터를 복구하므로 복구 속도가 빠르다.

- 단점
  
  - 배치 처리로 인해 실시간 데이터 저장이 불가하다.
  
  - `Redis`의 데이터 전체를 백업하므로 백업 속도가 느리다.
  
  - 데이터 백업 과정중 서버가 다운되면 데이터가 사라진다.

# 

---

- 레퍼런스

> https://brunch.co.kr/@jehovah/20
> 
> ['Linux Server/Redis' 카테고리의 글 목록](https://server-talk.tistory.com/category/Linux%20Server/Redis)
> 
> [레디스 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%EB%A0%88%EB%94%94%EC%8A%A4)
> 
> [[데이터베이스] Redis란?](https://steady-coding.tistory.com/586)
