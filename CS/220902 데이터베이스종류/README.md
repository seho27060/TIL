# 관계형/ 비관계형 데이터베이스

## 데이터베이스

### 관계형 데이터베이스

- 일반적으로 사용하는 Mysql, Oracle 과 같은 고전적인 데이터베이스

- 행과 열로 구성된 테이블을 갖는다.

- 테이블의 구조와 데이터 타입을 사전에 정의한다. 정의 내용에 알맞은 형태의 데이터만 삽입할 수 있다.

### 비관계형 데이터베이스

- 관계형 데이터베이스를 뺀 나머지 유형

- 데이터 모델에 따라 유형이 다양하다.

- NoSQL(not only SQL)라고도 한다.

- 관계형 데이터베이스에 데이텨를 스키마에 맞게 입력하는 반면, NoSQL에서는 데이터를 읽어올때 스키마에 따라 읽어온다.(schema on read)

#### NoSQL 데이터베이스 유형

- key-value 타입 
  
  - key-value 쌍으로 나타내는 데이터의 배열 형태

- 문서형(Document) 데이터베이스
  
  - 데이터를 테이블이 아닌, 문서처럼 저장한다.
  
  - JSON과 유사한 형식의 데이터를 문서화하여 저장
  
  - 각각의 문서는 하나의 속성에 대한 데이터를 가지고 있고, 컬렉션이라는 그룹으로 묶어서 관리
  
  - MongoDB가 대표적이다.

- Wide-Column Store 데이터베이스
  
  - 데이터베이스의 열에 대한 데이터를 집중적으로 관리하는 데이터베이스이다.
  
  - 각 열에는 key-value형식으로 데이터가 저장되고, 컬럼 패밀리(column families)라고 하는 열의 집합체 단위로 데이터를 처리
  
  - 하나의 행에 많은 열을 포함할 수 있어서 유연성이 높다.
  
  - Cassandra, HBase가 대표적이다.

- 그래프(Graph) 데이터베이스
  
  - 자료구조의 그래프와 비슷한 형식으로 데이터 간의 관계를 구성
  
  - 노드에 속성별(entities)로 데이터를 저장한다.
  
  - 노드간 관계는 선(edge)으로 표현한다.
  
  - Neo4J, InfiniteGraph 가 대표적이다.

### SQL 데이터베이스와 NoSQL 데이터베이스 차이점

#### 데이터 저장(Storage)

- NoSQL은 key-value, document, wide-column, graph등의 방식으로 데이터를 저장한다.

- 관계형 데이터베이스는 SQL을 이용해서 데이터를 테이블에 저장한다.

#### 스키마(Schema)

- SQL을 사용하면, 
  
  - 고정된 스키마가 필요하다. 모든 데이터에 속성별로 열에 대한 정보를 미리 저장해둔다.
  
  - 스키마는 나중에 변경할 수 있지만, 이 경우 데이터베이스 전체를 수정하거나, 오프라인으로 전환할 필요가 있다.

- NoSQL을 사용하면,
  
  - 관계형 데이터베이스보다 동적으로 스키마의 형태를 관리할 수 있다.
  
  - 행을 추가할 때 즉시 새로운 열을 추가할 수 있고, 개별 속성에 대해서 모든 열에 대한 데이터를 반드시 입력하지 않아도 된다.

#### 쿼리(Querying)

- 데이터베이스 정보를 요청하는 질의문

- 관계형 데이터베이스에서는
  
  - 테이블의 형식과 테이블간의 관계에 맞춰 데이터를 요청해야한다.
  
  - SQL과 같은 구조화된 쿼리 언어 사용

- 비관계형 데이터베이스에서는
  
  - 데이터 그룹 자체를 조회하는 것에 초점
  
  - 구조화되지 않은 쿼리 언어로도 데이터 요청 가능(UnQL, UnStructured Query Language)

#### 확장성(Scalability)

- 일반적으로 SQL 기반 관계형 데이터베이스는 수직적으로 확장한다.
  
  - 높은 메모리, CPU를 사용하는 확장, 비용이 많이 든다.
  
  - 여러 서버에 걸쳐서 데이터베이스의 관계를 정의할 수 있지만, 역시 비용과 시간이 많이 든다.

- NoSQL 데이터베이스에서는 수평적으로 확장된다.
  
  - 값싼 서버를 증설하며, 클라우드 서비스를 이용하는 확장이라고도 한다.

### 사용 케이스

#### SQL 기반의 관계형 데이터베이스를 사용하는 경우

1. 데이터베이스의 ACID 성질을 준수해야 하는 경우
   
   - ACID : Atomicity(원자성), Consistency(일관성), Isolation(격리성), Durability(지속성)을 의미한다.
     
     - 데이터베이스에서 실행되는 하나의 트랜잭션(Transaction)에 의한 상태 변화를 수행하는 과정에서, 안전성을 보장하기 위해 필요한 성질
   
   - SQL을 사용하면 데이터베이스와 상호 작용하는 방식을 정확하게 규정할 수 있기 때문에, 데이터베이스에서 데이터를 처리할 때 발생하는 예외를 줄이고, 데이터베이스의 무결성을 보호할 수 있다.

2. 소프트웨어에 사용되는 데이터가 구조적이고 일관적인 경우
   
   - 소프트웨어의 규모가 많은 서버를 필요로 하지 않고, 일관된 데이터를 사용하는 경우

#### NoSQL 기반의 관계형 데이터베이스를 사용하는 경우

1. 데이터의 구조 거의 또는 전혀 없는 대용량의 데이터를 저장하는 경우
   
   - 대부분의 NoSQL 데이터베이스는 저장할 수 있는 데이터의 유형에 제한이 없다.
   
   - 필요에 따라, 언제든지 데이터의 새 유형을 추가할 수 있다.
   
   - 소프트웨어 개발에 정형화되지 않은 많은 양의 데이터가 필요한 경우

2. 클라우드 컴퓨팅 및 저장공간을 최대한 활용하는 경우
   
   - 클라우드 기반으로 데이터베이스 저장소를 구축하면, 저렴한 비용의 솔루션 가능
   
   - 소프트웨어에 데이터베이스의 확장성이 중요하다면, 별다른 번거로움 없이 확장할 수 있는 NoSQL 데이터베이스가 적절하다.

3. 빠르게 서비스를 구축하는 과정에서 데이터 구조를 자주 업데이트 하는 경우
   
   - NoSQL 데이터베이스의 경우 스키마를 미리 준비할 필요가 없기 때문에 빠르게 개발하는 과정에 매우 유리하다.
   - 소프트웨어 버전 별로 많은 다운 타입(데이터베이스 서버를 오프라인으로 전환하여 데이터 처리를 진행하는 작업 시간)없이 데이터 구조를 업데이트해야하는 경우, 스키마를 매번 수정해야 하는 관계형 DB보다는 NoSQL 기반의 비관계형 DB가 적합하다.
