- [분산 시스템에서의 데이터 전송](#분산-시스템에서의-데이터-전송)
  - [복잡한 형태의 데이터 전송](#복잡한-형태의-데이터-전송)
    - [직렬화와 역직렬화](#직렬화와-역직렬화)
      - [Serialization Formats](#serialization-formats)


# 분산 시스템에서의 데이터 전송

## 복잡한 형태의 데이터 전송

### 직렬화와 역직렬화

- Serialization(직렬화) : 데이터 구조, 객체를 네트워크로 전송할때, 저장할 수 있는 형식으로 변환하는 과정

- Deserialization(역직렬화) : 직렬화된 객체를 데이터 구조나 처리 가능한 객체로 재구성하는 과정

- HTTP Transaction에서 요청, 응답의 과정에서는 송신 전 직렬화 - 수신 전 역직렬화 작업이 실행된다.

#### Serialization Formats

- Json - JavaScript Object Notation
  
  - 잘 알죠 네
  
  - 복잡한 객체(스트링, 넘버, 불린, 객체, 배열)를 단순한 텍스트로 표현 가능
  
  - 특징
    
    - 간단하며 가독성이 좋다.
    
    - 프로그래밍 언어에 독립적으로 어떤 플랫폼에도 적합하다.
    
    - 하지만 프로그래밍 언어에 독립적이기 때문에 각각의 언어에서는 Json 직렬화/역직렬화를 위한 외부 라이브러리가 필요하다.
    
    - 스키마가 없기 때문에 자유롭게 사용 가능하지만, Ambiguous한 상황이 발생한다.
      
      - 송신은 스트링 형태의 정수 배열, 수신은 정수 형태의 정수 배열 -> 비정형 스키마로 인해 사용자간 혼란 야기
    
    - 바이너리 형태보다 큰 용량이기 때문에 최적화에 적합하지 않다.

- Java Object Serialization - 자바 객체 직렬화
  
  자바로 구성된(JVM) 노드간에 데이터를 전송하는 객체
  
  ```java
  public class Data implements Serializable {
      ...
  }
  ```
  
  - `Serializable` 인터페이스로 구현한다.
  
  - 해당 인터페이스를 상속은 객체는 자동으로 직렬화되어 전송된다.
    
    - `static`과 `transient` 변수는 제외한다.
  
  - 직렬화/역직렬화 과정을 위해 원본 클래스의 정의가 사용자간에 일치해야 한다.
  
  - 객체의 생성자에 접근이 가능해야하고, 매개변수가 없어야 한다.
  
  - 특징
    
    - 객체가 재구성되어도 상태가 절대 변하지 않는다.
    
    - Json에서의 타입 모호성(Type Ambiguity)이 없기 때문에 전송한 모든것이 동일한 타입, 동일한 이름으로 정확히 동일하게 수신된다.
    
    - 명확하고 통일된 스키마를 갖게됨
    
    - JVM 언어를 지원하므로 외부 라이브러리가 필요없다.
    
    - 가독성이 떨어지고 텍스트 에디터에서 수정할 수 없다.
    
    - JVM과 긴밀하게 연결되어 다른 Golang, C++에서는 사용 불가하다.

- Google's Protocol Buffers
  
  - 잘 정의된 스키마, 뛰어난 언어 통합성, 언어와 플랫폼에 구애받지 않음, 높은 성능
  - 직렬화/역직렬화 2가지 과정
    - Message Definition(proto file) - 메시지의 구조나 스키마를 proto format으로 정의
    - Proto Compiler(protoc) - 직렬화 및 역직렬화 메서드 뿐만 아니라 메시지의 모든 필드를 포함한 언어별 스텁(껍데기 객체)를 만든다.
  - 특징
    - 모호함없이 스키마가 저장된다
    - 프로토 파일 정의와 프로토 파일 컴파일러를 통해 프로그래밍 언어에 독립적으로 사용 가능 하다.
    - 효율성과 안전성
      - 프로토콜 버퍼는 태그 번호만 포함하고 나머지 값은 암호화하기 때문에 송수신자 만이 데이터를 사용가능하다.(중간에 탈취당해도 사용할 수가 없다.)
    - 가독성이 없고 디버깅이 어렵다.
    - 직렬화/역직렬화의 2가지 과정이 복잡하다.

---  

- 레퍼런스

> [Java 를 활용한 분산 시스템 및 클라우드 컴퓨팅](https://www.udemy.com/course/java-distributed-system/)
