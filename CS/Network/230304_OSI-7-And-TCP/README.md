# OSI 7 Layer and TCP/IP

## OSI 7 Layer and TCP/IP

- 인터넷 네트워크를 구성하는데 기반이 되는 `OSI 7 Layer`와 `TCP`의 정의와 연관성, 각각의 목적에 대해 알아보자.

### OSI 7 Layer

> **OSI 모형**(Open Systems Interconnection Reference Model)은 [국제표준화기구](https://ko.wikipedia.org/wiki/%EA%B5%AD%EC%A0%9C%ED%91%9C%EC%A4%80%ED%99%94%EA%B8%B0%EA%B5%AC "국제표준화기구")(ISO)에서 개발한 모델로, 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명한 것이다. 일반적으로 **OSI 7 계층이라고 한다.** - 위키백과

- 네트워크에서의 **프로토콜**을 기능별로 나눈 것으로, 각 계층은 하위 계층의 기능만을 사용하고 상위 계층에는 기능을 제공하는 위계를 갖는다.

- 통신을 일어나는 과정을 단계별로 파악할 수 있고, 이를 통해 문제 발생에 대해 부분적인 대응이 가능하다.

- 데이터 캡슐화
  
  - 사용자 데이터가 각 계층을 지나면서 하위 계층은 상위 계층으로 부터 온 정보를 데이터로 취급하며, 자신의 계층 특성을 담은 제어정보를 헤더화 시켜 붙이는 일련의 과정
  
  - 데이터를 보낼때는 최상위 계층(응용)에서 최하위 계층(물리)로 내려갈 수록, 기존의 데이터(PDU, Protocol Data Unit. 프로토콜 데이터 단위)에 머리말(Header, 헤더)와 꼬리말(Footer,푸터)가 더해진다.
    
    - 반대로 데이터를 받는 경우, 최하위 계층으로 시작하여 PDU로부터 헤더와 푸터를 분석하여 올라가 최상위 계층으로 도달할 시 원본 데이터만 남게 된다.

#### Layer(계층)

- 높은 계층에 위치할 수록, 사용자와 가깝고 그 반대의 경우 사용자와 멀어지게 된다.

| 계층  | 이름                        | 예시                                  |
| --- | ------------------------- | ----------------------------------- |
| 7   | 응용 계층(Application Layer)  | 브라우저, `HTTP`, `SSH`, `DNS`,...      |
| 6   | 표현 계층(Presentation Layer) | 인코딩, 디코딩, 암호화, `JPEG` , `ASCII`,... |
| 5   | 세션 계층(Session Layer)      | `SSL` , `TLS`...                    |
| 4   | 전송 계층(Transport Layer)    | `TCP`, `UDP`, 특정 방화벽 및 프록시 서버       |
| 3   | 네트워크 계층(Network Layer)    | 라우터                                 |
| 2   | 데이터링크 계층(DataLink Layer)  | MAC 주소, 브릿지 및 스위치,`Ethernet`,       |
| 1   | 물리 계층(Physical Layer)     | 허브, 네트워크 어댑터, 신호변경(디지털, 아날로그)       |

##### 응용 계층

- `OSI 7 Layer` 모델에서 최상위 계층으로 사용자가 네트워크 자원에 접근하는 방법을 제공한다.

- 사용자가 볼수 있는 유일한 계층으로, 모든 네트워크 활동의 기반이 되는 인터페이스를 제공한다.

##### 표현 계층

- 응용 계층으로부터 전달받은 데이터를 읽을 수 있는 형식으로 변환한다.

- 텍스트와 이미지 같은 데이터를 적절하게 인코딩/디코딩하거나 암호화를 통해 전달에 용이하도록 하여 네트워크의 부담을 줄인다.

##### 세션 계층

- 두 컴퓨터 간의 대화나 세션을 관리한다.

- 모든 통신 장치 간에 연결을 설정-관리-종료하고 양방향 또는 단방향 여부를 확인한다.

- 호스트가 갑자기 중지되지 않고 정상적으로 호스트를 연결하는 데 책임이 있다.

- `TCP/IP` 세션을 생성, 관리하는 활동 등으로 세션을 확립, 유지, 중단하는 작업을 수행한다.

##### 네트워크 계층

- 가장 복잡한 계층중 하나로, 실제 네트워크 간에 **데이터 라우팅**을 담당한다.
  
  - 라우팅 : 어떤 네트워크 안에서 통신 데이터를 짜여진 알고리즘에 의해 최대한 빠르게 보낼 최적의 경로를 선택하는 과정

- 데이터 스트림을 작은 단위로 분할하고 노드를 거칠 때마다 경로를 안내한다.

- 네트워크를 통한 데이터 전달에서 전송 계층이 요구하는 서비스 품질을 제공하기 위한 기능적, 절차적 수단을 제공한다.

##### 데이터링크 계층

- 물리적인 네트워크를 통해 데이터를 전송하는 수단을 제공한다. 1홉 통신을 담당한다고도 한다.
  
  - 홉(hop)이란 컴퓨터 네트워크에서 노드에서 다음 노드로 가는 경로를 의미한다.
  
  - 1홉은 한 라우터에서 그 다음 라우터까지의 경로를 말한다.

- 물리적인 장치를 식별하는 데 사용할 수 있는 주소 지정 체계를 제공한다.

##### 물리 계층

- `OSI 7 Layer`  모델의 맨 밑에 있는 계층으로, 네트워크 데이터가 전송되는 물리적인 매체이다.

- 하드웨어의 물리적, 전기적 특성을 정의하며 연결을 설정 및 종료하고 통신 자원을 공유하는 수단을 제공한다.

- 네트워크 계층과 함께 가장 복잡한 계층중 하나이다.

### TCP/IP

> **전송 제어 프로토콜**(**T**ransmission **C**ontrol **P**rotocol, **TCP**, [문화어](https://ko.wikipedia.org/wiki/%EB%AC%B8%ED%99%94%EC%96%B4 "문화어"): 전송조종규약)은 [인터넷 프로토콜 스위트](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%84%B7_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C_%EC%8A%A4%EC%9C%84%ED%8A%B8 "인터넷 프로토콜 스위트")(IP)의 핵심 [프로토콜](https://ko.wikipedia.org/wiki/%ED%86%B5%EC%8B%A0_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C "통신 프로토콜") 중 하나로, IP와 함께 *TCP/IP*라는 명칭으로도 널리 불린다. - 위키백과

- 네트워크의 정보 전달을 통제하는 프로토콜
  
  - 클라이언트와 서버가 연결되어 **연결지향적**이며
  
  - `Handshaking` 을 통해 **신뢰성을 보장**한다.
  
  - 데이터를 패킷에 담아 보냄으로 **순서가 보장**된다.

- `OSI 7 Layer`을 기반으로 하여 상업적이고 실무적으로 이용될 수 있도록 단순화된 현실화의 과정에서 채택된 모델이다.
  
  - 그 연관성은 아래 그림을 참고하자.
  
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F995EFF355B74179035" title="" alt="" data-align="center">

#### TCP/ IP Network Model

- 4계층으로 구성된 네트워크 모델
  
  | Layer | Name        |
  | ----- | ----------- |
  | 4     | Application |
  | 3     | Transport   |
  | 2     | Internet    |
  | 1     | Data Link   |

- 각 계층은 관련 프로토콜을 사용하여 **다른 네트워크의 같은 계층**과 통신할 수 있다.

- 계층이 낮을수록 물리적 하드웨어와 가까우며, 계층이 높을수록 사용자, 개발자와 가깝다.

##### Layer 4 - Application

- 여러 가지 목적으로 다양한 프로토콜이 사용된다.
  
  | Protocol                            | 목적                    |
  | ----------------------------------- | --------------------- |
  | FTP(File Transfer Protocol)         | 웹을 거쳐 파일 전송           |
  | SMTP(Simple Mail Transfer Protocol) | 이메일 수신 및 송신           |
  | DNS(Domain Name System)             | host name을 IP 주소로 변환  |
  | HTTP(Hypertext Transfer Protocol)   | 문서, 비디오, 사운드, 이미지를 전송 |

##### Layer 3 - Transport

- 한 시스템의 프로세스에서 다른 시스템의 프로세스로 메시지와 데이터를 전송한다.

- **소켓**의 16비트 포트로 서로를 구별한다.
  
  - 수신 포트는 목적지의 응용 프로그램에 의해 미리 정해지지만
  
  - 발송 포트는 사용한 포트 중 원하는 포트를 선택하여 즉흥적으로 정해진다.

- 우편 배달에 비유하면 포트 번호는 아파트의 주소와 받는 사람의 이름.

- **TCP**와 **UDP**가 있다.

##### Layer 2 - Internet

- 데이터 링크로부터 정보를 받아 사용자에게 좀더 가까운 작업을 수행한다.

- 여러 네트워크를 통해 데이터를 전송, 데이터를 전송한 컴퓨터에서 받은 패킷을 라우팅하는 일을 한다.

- 해당 계층에서는 데이터가 어떤 IP를 갖는 네트워크로 이동하는게 끝이다. 전송 데이터가 어떤 역할을 하며 어떤 프로그램으로 전송되는지는 알 수 없다.

- **Internet Protocol(IP)** : 네트워크가 갖는 부호이며 패킷이 네트워크를 통해 소스 호스트에서 대상 호스트로 이동할 수 있게한다.

##### Layer 1 - Data Link

- 하드웨어에 직첩 요청하는 사항을 담당

- 단일 링크로 연결된 두 지점 사이에서 데이터를 물리적으로 전달

- 맡은 역할로는
  
  - 데이터 캡슐화, 인코딩
  
  - 데이터 흐름 제어
  
  - 오류 감지와 수정
  
  - 등등

- **Ethernet Protocol** : 데이터 패킷을 하나의 프레임으로 만들어서 장치의 MAC 주소를 사용해 다른 주소로 패킷을 전달한다.

--- 

- 레퍼런스

> [OSI 모형 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95)
> 
> http://wiki.hash.kr/index.php/OSI_7_%EA%B3%84%EC%B8%B5
> 
> [[ 네트워크 쉽게 이해하기 22편 ] TCP 3 Way-Handshake &amp; 4 Way-Handshake](https://mindnet.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-22%ED%8E%B8-TCP-3-WayHandshake-4-WayHandshake)
