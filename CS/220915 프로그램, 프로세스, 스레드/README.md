[TOC]

# 프로그램, 프로세스, 스레드

### 프로그램(Program)

> 어떤 작업을 하기 위해 해야할 일들을 순서대로 나열한 것

- 운영체제가 어떤 작업을 위해 실행 할 수 있는 '**정적인 상태**의 파일'
  
  ex) exe와 같은 실행파일.

- 사용자가 원하는 일을 처리할 수 있도록 프로그래밍 언어를 통한 명령어들의 모음, 일변의 명령문 집합체

- 명렴문 집합체의 형태로 하드디스크 등의 매체에 바이너리 형식의 파일로 저장되어 있다.

### 프로세스(Process)

> 컴퓨터에서 운영체제에 의해 연속적으로 실행되고 있는 '**동적인 상태**'의 프로그램을 말한다.

- 하드디스크의 정적으로 저장된 프로그램을 구동하여 프로그램 자체와 프로그램의 상태가 **메모리상에 실행되는 작업 단위**를 지칭한다.

- 프로세서(Processor) : 컴퓨터 내에서 프로그램을 수행하는 하드웨어 유닛. 이는 중앙 처리 장치(CPU)를 틋하며 명령어를 해석하는 컴퓨터의 한 부분.

#### 프로세스의 특징

- 프로세스는 별도의 주소 공간을 할당받는다.
  
  - Code : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
  
  - Data : 전역변수, 정젹변수, 배열 등
    
    - 초기화 된 데이터는 data 영역에 저장
    
    - 초기화 되지 않은 데이터는 bss 영역에 저장
  
  - Heap : 동적 할당 시 사용
  
  - Stack : 지역변수, 매개변수, 리턴 값(임시 메모리 영역)

- 프로세스의 동시성(Concurrency)
  
  - 프로세서는 하나의 프로세스만 순차적으로 실행할 수 있다.
  
  - 여러개의 프로그램을 실행시, 여러개의 프로세스가 부분적으로 작업을 수행한다. 각기 다른 프로세스를 부분적으로 아주 빠르게 수행한다.
  
  - 위와 같이 진행중인 작업을 바꾸는 걸 '**Context Switching**'이라고 한다. 해당 과정이 매우 빠른 속도로 진행되어, 사람이 보기에는 여러 프로세스들이 동시에 **진행되는 것 처럼** 보인다.

- 프로세스의 병렬성(Parallelism)
  
  - 프로세서 하나에 코어 여러개가 달려 각각 동시에 작업하는 방식을 병렬성이라 한다.

### 쓰레드(Thread)

> 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 **흐름의 단위**

- 프로세스 내에서 프로세스의 자원을 이용해서 실제로 작업을 수행하는 일꾼

- 프로세스는 최소 한 개 이상의 스레드를 가지며, 해당 스레드를 메인 스레드(main thread)라고 한다.

#### 쓰레드의 특징

- 각 스레드는 독자적인 스택(Stack) 메모리를 갖는다.

- 스레드는 프로세스 내에서 각각 스택만 할당받고 Code, Data, Heap 영역은 공유한다.
  
  - 스레드는 한 프로세스 내에서 동작되는 여러 실행의 흐름으로, 프로세스 내의 주소공간이나 자원들을 같은 프로세스 내의 스레드끼리 공유하며 실행된다.

- 스레드는 메모리를 공유하기 때문에 **동기화, 데드락**등의 문제가 발생 할 수 있다.

## 멀티프로세스와 멀티쓰레드

- 멀티프로세스와 멀티쓰레드는 **자원의 효율성 증대**와 **처리 비용 감소 및 응답 시간 단축** 실행의 최적화를 이뤄낼 수 있다.

### 멀티프로세스(Multi-Process)

- 하나의 응용프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는 것.

#### 멀티프로세스의 특징

- 여러 개의 자식 프로세스 중 하나에 문제가 발생하면, 해당 자식 프로세스만 죽는 것 이상으로 다른 영향이 확산되지 않는다.

- Context Switching 과정에서 캐쉬 메모리 초기화 등 무거운 작업이 진행되고, 많은 시간이 소모되는 등의 오버헤드가 발생한다.

- 프로세스는 각각의 독립된 메모리 영역을 할당받았기 때문에 프로세스 사이에 공유하는 메모리가 없어, Context Switching 이 발생하면 캐쉬에 있는 모든 데이터를 리셋하고 다시 캐쉬정보를 불러와야 한다.

### 멀티쓰레드(Multi-Thread)

-  하나의 응용프로그램을 여러 개의 스레드로 구성하고, 각 스레드로 하여금 하나의 작업을 처리하도록 하는 것.

- 웹 서버는 대포적인 멀티 스레드 응용프로그램

#### 멀티쓰레딩의 특징

- 시스템 자원 소모 감소, 시스템 처리량 증가를 통해 자원의 효율성 증대와 처리 비용 감소가 가능하다.

- 쓰레드는 프로세스 내의 Stack 영역을 제외한 모든 메모리를 공유하기 때문에 통신의 부담이 적다.

- 디버깅이 까다롭고 주의 깊은 설계가 필요하다.

- 단일 프로세스 시스템의 경유 효과를 기대하기 어렵다.

- 서로 다른 프로세스에서 스레드를 제어할 수 없다.

- 멀티 스레드의 경우 자원 공유의 문제가 발생한다.(동기화 문제)
